<div class="run-workflow">
  <h5 class="header-text">
    <strong>Run Workflow</strong>
  </h5>
  <p class="run-workflow-row">
    <span class="col-md-4">
      <dropdown-group [data]="graphStore"
        [fields]="graphFields" [labels]="graphLabels"
        [columns]="graphColumns" [offsets]="graphOffsets"
        (selected)="onGraphSelect($event)" (cleared)="onGraphRefresh($event)">
      </dropdown-group>
    </span>
  </p>

  <p class="run-workflow-row">
    <span class="col-md-4">
      <dropdown-group [data]="selNodeStore" [disable]="disable"
        [fields]="nodeFields" [labels]="nodeLabels"
        [columns]="nodeColumns" [offsets]="nodeOffsets"
        (cleared)="onNodeRefresh($event)">
      </dropdown-group>
    </span>
  </p>
  <div class="col-md-7 col-xs-7 col-lg-7 filter-by">
    <label class="filter-title"><b>Filter Node</b></label>
    <section>
      <dropdown-group [data]="nodeStore"
        [fields]="filterFields" [labels]="filterLabels" [shareRow]="false" resetColumn=12
        [columns]="filterColumns" [needReset]="true" [offsets]="filterOffsets"
        (selected)="onFilterSelect($event)" (cleared)="onFilterRefresh($event)">
      </dropdown-group>
    </section>
  </div>
  <div class="col-md-7 json-editor">
    <p class="run-workflow-row"><label><b>Payload:</b></label></p>
    <div #jsoneditor id="jsoneditor"></div>
  </div>
  <div class="col-md-7 bottom-button">
    <button class="btn btn-primary" (click)="postWorflow()"
      [disabled]="!(this.selectedGraph && this.selectedGraph.injectableName)">
      Run Workflow</button>
  </div>
  <clr-modal [(clrModalOpen)]="showModal" [clrModalSize]="'lg'">
    <h3 class="modal-title" *ngIf="showModal">{{runWorkflowRes.title}}</h3>
    <div class="modal-body" *ngIf="showModal">
      <p>{{runWorkflowRes.note | json}}</p>
    </div>
    <div class="modal-footer" *ngIf="showModal && runWorkflowRes.type == 1">
      <button class="btn btn-outline" type="button" (click)="showModal = false">No</button>
      <button class="btn btn-primary" type="button" (click)="goToViewer()">Yes</button>
    </div>
    <div class="modal-footer" *ngIf="showModal && runWorkflowRes.type == 2">
      <button class="btn btn-primary" type="button" (click)="showModal = false">OK</button>
    </div>
  </clr-modal>
</div>
