<div class="workflow-viewer">
  <h5 class="header-text">
    <strong>Workflow Canvas</strong>
  </h5>

  <form class="form search-form" [formGroup]="filterForm">
    <section class="form-block row">
      <span class="col-md-4">
        <label for="graphId"><b>{{isDefinition? "InjectableName": "GraphId"}}</b></label>
        <datalist id="workflow_id_list">
          <select name="id_select" size="6">
            <option [ngValue]="id" *ngFor="let id of dropDownList">
              {{id}}
            </option>
          </select>
        </datalist>
        <!-- keyup will be triggered when change is triggered -->
        <input #idSearcher id="graphId" type="text"
          formControlName="graphId"
          [size]="isDefinition ? 42 : 37"
          list="workflow_id_list"
          (keyup)="onSearch(idSearcher.value, isDefinition ? 'injectableName' : 'instanceId')"
          (focus)="onFocus(isDefinition ? 'injectableName' : 'instanceId')"
          (change)="onChange(idSearcher.value, isDefinition ? 'injectableName' : 'instanceId')">
      </span>
      <span *ngIf="!isDefinition" class="col-md-3">
        <label for="graphId"><b>Node</b></label>
        <datalist id="workflow_node_list">
          <select name="node_select" size="6">
            <option [ngValue]="node" *ngFor="let node of dropDownList">
              {{node}}
            </option>
          </select>
        </datalist>
        <input #nodeSearcher
          id="graphNode" type="text" formControlName="node" size="30"
          list="workflow_node_list"
          (keyup)="onSearch(nodeSearcher.value, 'node')"
          (focus)="onFocus('node')"
          (change)="onChange(idSearcher.value, 'node')">
      </span>
      <span class="col-md-4">
        <label for="graphName"><b>{{isDefinition? "FriendlyName": "Name"}}</b></label>
        <datalist id="workflow_id_list">
          <select name="id_select" size="6">
            <option [ngValue]="name" *ngFor="let name of dropDownList">
              {{name}}
            </option>
          </select>
        </datalist>
        <input #nameSearcher id="graphName" type="text"
          formControlName="graphName"
          [size]="37"
          list="workflow_id_list"
          (keyup)="onSearch(nameSearcher.value, isDefinition ? 'friendlyName': 'name')"
          (focus)="onFocus(isDefinition ? 'friendlyName': 'name')"
          (change)="onChange(nameSearcher.value, isDefinition ? 'friendlyName': 'name')">
      </span>
      <span class="col-md-1">
        <button type="button" class="btn btn-icon clear" (click)="onClear()" title="Clear">
          <clr-icon shape="times"></clr-icon>
        </button>
      </span>
    </section>
  </form>

  <div class="row canvas">
    <app-canvas-graph
      [onWorkflowInput]='onWorkflowInput'
      [editable]=false>
    </app-canvas-graph>
  </div>
</div>
