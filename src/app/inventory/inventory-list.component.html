<div class="app-inventory-list">
  <div class="row">
    <div class="offset-lg-1 offset-md-1 offset-sm-1 offset-xs-1">
    </div>
    <div class="col-lg-10 row count-summary-bar">
      <div class="row col-lg-7 col-md-7 col-sm-7 col-xs-7">
        <div class="col-lg-3 count-summary"
          *ngFor="let type of deviceTypes"
          (click)="selectType(type)"
          [class.selected]="selectedType==type.displayName">
          <h2 class="count-number">{{ devicesTypeCountMatrix[type.identifier] || 0 }}</h2>
          <span class="count-text">{{ type.displayName }}</span>
        </div>
      </div>
      <div class="vl"></div>
      <div class="row col-lg-5 col-md-5 col-sm-5 col-xs-5">
        <div class="col-lg-4 count-summary"
          *ngFor="let status of deviceStatus"
          (click)="selectStatus(status)"
          [class.selected]="selectedStatus==status.displayName">
          <h2 class="count-number">{{ devicesStatusCountMatrix[status.identifier] || 0 }}</h2>
          <span class="count-text {{status.identifier}}">{{ status.displayName }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="offset-lg-1 offset-md-1 offset-sm-1 offset-xs-1">
    </div>
    <div class="col-lg-10 col-md-10 col-sm-10 com-xs-10">
      <div class="row grid-header">
        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
          <h5><strong>Inventory Grid</strong></h5>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 grid-toolbar">
          <button class="btn btn-link refresh" (click)="refreshDatagrid()">
            <clr-icon shape="refresh"></clr-icon> refresh
          </button>
          <div class="search">
            <label for="search_box"><clr-icon shape="search"></clr-icon></label>
            <input #searchBox type="text" id="search_box" placeholder="" (keyup)="search(searchBox.value)">
          </div>
        </div>
      </div>
      <clr-datagrid [clrDgLoading]="dgDataLoading" [(clrDgSingleSelected)]="selectedDevice" [clDgRowSelection]="true">
          <clr-dg-placeholder>{{ dgPlaceholder }}</clr-dg-placeholder>
          <clr-dg-column [clrDgSortBy]="nameComparator">Name</clr-dg-column>
          <clr-dg-column [clrDgSortBy]="typeComparator">Type
            <clr-dg-string-filter
              [(clrFilterValue)]="typeFilterValue"
              [clrDgStringFilter]="typeFilter"></clr-dg-string-filter>
          </clr-dg-column>
          <clr-dg-column [clrDgSortBy]="provisionComparator">Provisioned</clr-dg-column>
          <clr-dg-column [clrDgSortBy]="ipComparator">IP</clr-dg-column>
          <clr-dg-column [clrDgSortBy]="serialNumberComparator">ServiceTag</clr-dg-column>
          <clr-dg-column [clrDgSortBy]="statusComparator">Status
            <clr-dg-string-filter
              [(clrFilterValue)]="statusFilterValue"
              [clrDgStringFilter]="statusFilter"></clr-dg-string-filter>
          </clr-dg-column>
          <clr-dg-column>
            Capacity
            <clr-signpost>
                <clr-signpost-content [clrPosition]="'top-middle'" *clrIfOpen>
                    <p><span class="color-square cpu"></span> cpu</p>
                    <p><span class="color-square networking"></span> networking</p>
                    <p><span class="color-square harddisk"></span> disk</p>
                </clr-signpost-content>
            </clr-signpost>
          </clr-dg-column>
          <clr-dg-column [clrDgSortBy]="rackComparator">Rack(click for rack view)</clr-dg-column>
          <clr-dg-column [clrDgSortBy]="siteComparator">Site</clr-dg-column>
          <clr-dg-column [clrDgSortBy]="telemetryDateComparator">TelemetryDate</clr-dg-column>
          <clr-dg-row *clrDgItems="let device of allDevices" [clrDgItem]="device" (click)="goToDetail(device)">
            <clr-dg-cell>{{device.name}}</clr-dg-cell>
            <clr-dg-cell>
              <clr-icon [attr.shape]="shapeMap[device.type]"></clr-icon>
              {{deviceTypeMap[device.type] || device.type}}
            </clr-dg-cell>
            <clr-dg-cell>{{device.provisioned}}</clr-dg-cell>
            <clr-dg-cell>{{device.ip}}</clr-dg-cell>
            <clr-dg-cell>{{device.serialNumber}}</clr-dg-cell>
            <clr-dg-cell>{{deviceStatusMap[device.status]}}</clr-dg-cell>
            <clr-dg-cell>
              <div class="row">
                <div class="progress-block">
                  <div class="progress-group" style="font-size: 2px">
                      <div class="progress-static cpu" *ngIf="device.systemCapacity.cpu">
                          <div class="progress-meter" [attr.data-value]="device.systemCapacity.cpu"></div>
                      </div>
                      <div class="progress-static networking" *ngIf="device.systemCapacity.networking">
                          <div class="progress-meter" [attr.data-value]="device.systemCapacity.networking"></div>
                      </div>
                      <div class="progress-static harddisk" *ngIf="device.systemCapacity.harddisk">
                          <div class="progress-meter" [attr.data-value]="device.systemCapacity.harddisk"></div>
                      </div>
                  </div>
                </div>
              </div>
            </clr-dg-cell>
            <clr-dg-cell>
                  <a routerLink="rack/{{device.rack}}">
                  <clr-icon shape="rack-server"></clr-icon>
                  rack{{device.rack}}
                  </a>
            </clr-dg-cell>
            <clr-dg-cell>{{device.site}}</clr-dg-cell>
            <clr-dg-cell>{{device.telemetryDate | date:'yyyy-MM-dd HH:mm'}}</clr-dg-cell>
          </clr-dg-row>
          <clr-dg-footer>
              <div class="row">
                  <label for="select_page_size">Select page size:</label>
                  <div class="select">
                    <select id="select_page_size" [(ngModel)]="selectedPageSize">
                        <option>15</option>
                        <option>20</option>
                        <option>50</option>
                        <option>100</option>
                    </select>
                  </div>
              </div>
              {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}}
              of {{pagination.totalItems}} nodes
              <clr-dg-pagination #pagination [clrDgPageSize]="dgPageSize">
              </clr-dg-pagination>
          </clr-dg-footer>
      </clr-datagrid>
    </div>
  </div>
</div>
